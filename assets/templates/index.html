{{define "head"}}<title>{{.Title}}</title>{{end}}
{{define "javascript"}}
$(document).ready(function() {
    $("tr:even").css("background-color", "#eeeeee");
    $("tr:odd").css("background-color", "#ffffff");
} );
{{end}}

{{define "summary"}}
<div class="summary">
    <div class="totaltitle">{{.Title}}</div>
<table>
  <thead>
    <tr>
      {{ range .Table.Columns }}<th>{{.}}</th>{{ end }}
    </tr>
  </thead>
  <tbody>
    {{ $cnt := .Table.LoopLen }}
    {{ range $i,$row := .Table.Rows }}
    <tr>
        {{ range $row }}<td {{ if eq $i $cnt }}class="grandtotal"{{end}}>{{.}}</td>{{ end }}
    </tr>
    {{ end }}
  </tbody>
</table>
</div>
{{end}}

{{define "profiles"}}
<div class="summary">
    <div class="totaltitle">{{.Title}}</div>
<table>
  <thead>
    <tr>
      {{ range .Table.Columns }}<th>{{.}}</th>{{ end }}
    </tr>
  </thead>
  <tbody>
    {{ range .Table.Rows }}
    {{ $profile := index . 0}}
    <td><a href="/dcman/profile/view?profile={{$profile}}">{{if $profile}}{{$profile}}{{else}}*blank*{{end}}</a></td><td>{{ index . 1 }}</td></tr>
    {{ end }}
  </tbody>
</table>
</div>
{{end}}

{{define "vms"}}
<div class="summary">
    <div class="totaltitle">{{.Title}}</div>
<table>
  <thead>
    <tr>
        <th>{{index .Table.Columns 1}}</th><th>{{ index .Table.Columns 2 }}</th>
    </tr>
  </thead>
  <tbody>
    {{ $cnt := .Table.LoopLen }}
    {{ range $i,$row := .Table.Rows }}
    {{ if lt $i $cnt }}
    {{ $profile := index $row 1 }}
    <tr><td><a href="/dcman/vm/all?dc={{index $row 0}}&profile={{$profile}}">{{if $profile}}{{$profile}}{{else}}*blank*{{end}}</a></td><td>{{ index $row 2 }}</td></tr>
    {{ else }}
    <tr><td class="grandtotal">{{index $row 1}}</td><td class="grandtotal">{{ index $row 2 }}</td></tr>
    {{ end }}
    {{ end }}
  </tbody>
</table>
</div>
{{end}}

{{define "body"}}
<h1 class="title">{{.Title}}</h1>
<div class="outer">
{{template "summary" .Physical}}
{{template "profiles" .Profiles}}
{{ range .VMs }}
  {{template "vms" .}}
{{end}}
</div>
{{end}}

