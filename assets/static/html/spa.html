<!DOCTYPE html>
<html>
<head>
    <title>DCMan Beta</title>
    <link rel="stylesheet" type="text/css" href="/dcman/static/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/dcman/static/css/new.css">

    <script src="/dcman/static/js/jquery-2.0.3.js"></script>
    <script src="/dcman/static/js/bootstrap.js"></script>
    <script src="/dcman/static/js/vue.js"></script>
    <script src="/dcman/static/js/vue-router.js"></script>

</head>
<body>

    <div id="app">
        <my-nav :app="myapp"></my-nav>
        <div class="bodybox">
        <router-view>Loading...</router-view>
        </div>
    </div>

    <div id="log"/>
    
</body>
</html>


<script type="text/x-template" id="tmpl-main-menu">
    <div>
    <ul class="nav navbar-nav navbar-right">
        <li v-show="!app.auth.loggedIn"><a v-link="{ path: '/auth/login' }">Log in</a></li>
        <li class="dropdown" v-show="app.auth.loggedIn && app.auth.user">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                {{ app.auth.user.name }} <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="#">Profile</a></li>
                <li><a href="#">Account settings</a></li>
                <li role="separator" class="divider"></li>
                <li><a v-link="{ path: '/auth/logout' }">Logout</a></li>
            </ul>
        </li>
    </ul>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a v-link="{ path: '/'}">Home <span class="sr-only">(current)</span></a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Servers<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a v-link="{ path: '/device/list' }">Device List</a></li>
            <li><a v-link="{ path: '/vm/list' }">VM List</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/rack/layout' }">Rack Layout</a></li>
            <li><a v-link="{ path: '/rack/list' }">Rack List</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/device/types' }">Device Types</a></li>
          </ul>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Parts<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a v-link="{ path: '/part/inventory' }">Parts Inventory</a></li>
            <li v-if="canEdit"><a v-link="{ path: '/part/load' }">Load Inventory</a></li>
            <li><a v-link="{ path: '/part/list/0' }">All Parts</a></li>
            <li v-if="canEdit"><a v-link="{ path: '/part/add' }">Add Part</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/part/types' }">Part Types</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/rma/list' }">RMA List</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/vendor/list' }">Vendor List</a></li>
            <li v-if="canEdit"><a v-link="{ path: '/vendor/edit/0' }">Add Vendor</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/mfgr/list' }">Manufactuer List</a></li>
          </ul>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Network<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a v-link="{ path: '/ip/list' }">Network IPs</a></li>
            <li><a v-link="{ path: '/vlan/list' }">VLANs</a></li>
            <li role="separator" class="divider"></li>
            <li v-if="canEdit"><a v-link="{ path: '/ip/reserve' }">Reserve IPs</a></li>
            <li><a v-link="{ path: '/ip/reserved' }">IPs Reserved</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/ip/types' }">IP Types</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" v-model="searchText">
        </div>
        <button class="btn btn-default" v-on:click.prevent="doSearch">Search</button>
      </form>
      <ul class="nav navbar-nav navbar-right" v-if="app.auth.user.admin > 1">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Admin<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a v-link="{ path: '/site/list' }">Site List</a></li>
            <li><a v-link="{ path: '/user/list' }">User List</a></li>
            <li><a v-link="{ path: '/admin/tags' }">Manage Tags</a></li>
            <li role="separator" class="divider"></li>
            <li><a v-link="{ path: '/admin/sessions' }">Session Log</a></li>
            <li><a v-on:click.prevent="toggleDebug">{{debugAction}} Debug</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <hr class=menubar"/>
    </div>
</script>


<script type="text/x-template" id="tmpl-rma-list">
    <div id="rma-list">
        <h1 class="mytitle">{{sitename}} RMAs</h1>
        <label for="STI">Site</label>
        <select id="STI" v-model="STI" number>
            <option v-for="site in sites" v-bind:value="site.STI">
                {{ site.Name }}
            </option>
        </select>

        <label for="pfilter">Kind</label>
        <select id="pfilter" name="pfilter" v-model="rmaType" number>
            <option v-for="kind in kinds" v-bind:value="kind.id">
                {{ kind.name }}
            </option>
        </select>

        <label for="query">Filter</label>
        <input id="query" name="query" v-model="searchQuery">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="rmas | rmaFilter" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<!-- common table template -->
<script type="text/x-template" id="tmpl-base-table">
  <table class="table table-striped">
    <thead>
      <tr>
        <th v-for="key in columns"
          @click.prevent="sortBy(key)"
          :class="{active: sortKey == key}">
          {{key | capitalize}}
          <span class="arrow"
            :class="sortOrders[key] > 0 ? 'asc' : 'dsc'">
          </span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="
        entry in rows
        | filterBy filterKey
        | filterBy subFilter
        | orderBy sortKey sortOrders[sortKey]" id="rowid(entry)"
        >
        <td v-for="key in columns">
           <template v-if="linkable(key)">
              <a v-link="{ path: linkpath(entry, key)}">{{ entry[key] }}</a>
           </template>
           <template v-else>
               <template v-if="linkable(key)">
                  <a v-link="{ path: linkpath(entry, key)}">{{ entry[key] }}</a>
               </template>
              {{* entry[key] }}
           </template>
        </td>
      </tr>
    </tbody>
  </table>
</script>


<script type="text/x-template" id="tmpl-part-list">
    <div id="parts-div">
        <h1 class="mytitle">{{sitename}} Spare Parts</h1>
        <label for="STI">Site</label>
        <select id="STI" name="STI" v-model="STI">
            <option v-for="site in sites" v-bind:value="site.STI">
                {{ site.Name }}
            </option>
        </select>

        <label for="pfilter">Filter</label>
        <select id="pfilter" name="pfilter" v-model="ktype">
            <option v-for="kind in kinds" v-bind:value="kind.id">
                {{ kind.name }}
            </option>
        </select>

        <label for="query">Search</label>
        <input id="query" name="query" v-model="searchQuery">
        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>
        <paged-grid 
            :data="rows | filterBy searchQuery | partFilter " 
            :filename="filename" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-part-types">
    <div id="ptypes-div">
        <h1 class="mytitle">Part Types</h1>
        <label for="query">Search</label>
        <input id="query" name="query" v-model="searchQuery">
        <paged-grid 
            :data="rows | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-network-grid">
  <table class="table">
    <thead>
      <tr>
        <th>IP</th>
        <th>Type</th>
        <th>Port</th>
        <th v-if="canEdit">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="entry in rows" id="ip-row-{{$index}}">
        <td>
            <input id="ip-{{$index}}" type="text" v-model="rows[$index].IP"/>
        </td>
        <td>
            <select id="ip-{{$index}}" v-model="rows[$index].IPT" number>
                <option v-for="type in iptypes" v-bind:value="type.IPT">
                    {{ type.Name }}
                </option>
            </select>
        </td>
        <td>
        <select v-model="rows[$index].IFD" number>
            <option v-for="port in ports" v-bind:value="port.IFD">
                {{ port.Port }}
            </option>
        </select>
        </td>
        <td v-if="canEdit">
            <button class="btn" v-on:click.prevent="updateIP($index)">Update</button>
            <button class="btn" v-on:click.prevent="deleteIP($index)">Delete</button>
        </td>
      </tr>
       
      <tr>
        <td>
            <input type="text" v-model="newIP"/>
        </td>
        <td>
            <select id="ip-{{$index}}" v-model="newIPT">
                <option v-for="type in iptypes" v-bind:value="type.IPT">
                    {{ type.Name }}
                </option>
            </select>
        </td>
        <td>
        <select v-model="newIFD" number>
            <option v-for="port in ports" v-bind:value="port.IFD">
                {{ port.Port }}
            </option>
        </select>
        </td>
        <td v-if="canEdit">
            <button class="btn" v-on:click.prevent="addIP" :disabled="ipAddDisabled">Add</button>
        </td>
      </tr>

    </tbody>
  </table>
</script>

<script type="text/x-template" id="tmpl-interface-grid">
  <table class="table">
    <thead>
      <tr>
        <th>Port</th>
        <th>Mgmt</th>
        <th>MAC</th>
        <th>Switch Port</th>
        <th>Cable Tag</th>
        <th v-if="canEdit">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="entry in rows" id="face-row-{{$index}}">
        <td>
            <input type="text" v-model="rows[$index].Port"/>
        </td>
        <td>
            <input type="checkbox" v-model="rows[$index].Mgmt"/>
        </td>
        <td>
            <input type="text" v-model="rows[$index].MAC"/>
        </td>
        <td>
            <input type="text" v-model="rows[$index].SwitchPort"/>
        </td>
        <td>
            <input type="text" v-model="rows[$index].CableTag"/>
        </td>
        <td v-if="canEdit">
            <button class="btn" v-on:click.prevent="updateInterface($index)">Update</button>
            <button class="btn" v-on:click.prevent="deleteInterface($index)">Delete</button>
        </td>
      </tr>

      <tr>
        <td>
            <input type="text" v-model="newPort"/>
        </td>
        <td>
            <input type="checkbox" v-model="newMgmt"/>
        </td>
        <td>
            <input type="text" v-model="newMAC"/>
        </td>
        <td>
            <input type="text" v-model="newSwitchPort"/>
        </td>
        <td>
            <input type="text" v-model="newCableTag"/>
        </td>
        <td v-if="canEdit">
            <button class="btn" v-on:click.prevent="addInterface" :disabled="interfaceAddDisabled">Add</button>
        </td>
      </tr>

    </tbody>
  </table>
</script>


<script type="text/x-template" id="tmpl-ip-list">
    <div>
        <h1 class="mytitle">{{sitename}} Network IP Addresses</h1>

        <label for="STI">Site</label>
        <select id="STI" v-model="STI">
            <option v-for="dc in sites" v-bind:value="dc.STI">
                {{ dc.Name }}
            </option>
        </select>

        <label for="Type">Type</label>
        <select id="Type" v-model="IPT">
            <option v-for="t in typelist" v-bind:value="t.IPT">
                {{ t.Name }}
            </option>
        </select>

        <label for="Host">Kind</label>
        <select id="Host" v-model="Host">
            <option v-for="h in hostlist" v-bind:value="h">
                {{ h }}
            </option>
        </select>

        <label for="query">Search</label>
        <input id="query" name="query" v-model="searchQuery">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="rows | ipFilter | filterBy searchQuery" 
            :filename="filename"
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-reserved-ips">
    <div>
        <h1 class="mytitle">{{sitename}} Reserved IP Addresses</h1>

        <label for="STI">Site</label>
        <select id="STI" v-model="STI">
            <option v-for="dc in sites" v-bind:value="dc.STI">
                {{ dc.Name }}
            </option>
        </select>

        <label for="query">Search</label>
        <input id="query" name="query" v-model="searchQuery">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="rows | filterBy searchQuery | siteFilter" 
            :filename="filename"
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-device-list">
    <div class="view">
        <div v-if="$loadingRouteData">Loading ...</div>
        <div v-if="!$loadingRouteData">
            <h1 class="mytitle">{{sitename}} Servers</h1>
            <label for="STI">Site</label>
            <select id="STI" v-model="STI" number>
                <option v-for="dc in sites" v-bind:value="dc.STI">
                    {{ dc.Name }}
                </option>
            </select>

            <label for="RID" v-show="STI">Rack</label>
            <select id="RID" v-model="RID" v-show="STI" number>
                <option v-for="rack in racks" v-bind:value="rack.RID">
                    {{ rack.Label }}
                </option>
            </select>

            <label for="query">Filter</label>
            <input name="query" v-model="searchQuery" @keyup="resetStartRow">

            <label for="pagerows">page size</label>
            <select id="pagerows" v-model="pagerows">
                <option v-for="size in sizes" v-bind:value="size">
                    {{ size }}
                </option>
            </select>

            <paged-grid 
                :data="rows | rackFilter | filterBy searchQuery" 
                :columns="columns" 
                :linkable="canLink"
                :linkPath="linkFN"
                :move-pages="movePages" 
                :start-row="startRow" 
                :filename="filename"
                :rows-per-page="rowsPerPage">
            </paged-grid>
        </div>
    </div>
</script>

<script type="text/x-template" id="tmpl-device-audit">
    <div class="view">
        <div v-if="$loadingRouteData">Loading ...</div>
        <div v-if="!$loadingRouteData">
            <label for="query">Filter</label>
            <input name="query" v-model="searchQuery" @keyup="resetStartRow">

            <select id="pagerows" v-model="pagerows">
                <option v-for="size in sizes" v-bind:value="size">
                    {{ size }}
                </option>
            </select>

            <paged-grid 
                :data="rows | filterBy searchQuery" 
                :columns="columns" 
                :linkable="linkable"
                :linkPath="linkpath"
                :move-pages="movePages" 
                :start-row="startRow" 
                :filename="filename"
                :rows-per-page="rowsPerPage">
            </paged-grid>
        </div>
    </div>
</script>

<script type="text/x-template" id="tmpl-device-types">
    <div class="view">
        <div v-if="$loadingRouteData">Loading ...</div>
        <div v-if="!$loadingRouteData">
            <h1 class="mytitle">Device Types</h1>
            <button class="btn" v-on:click.prevent="addType">Add Type</button>
            <paged-grid 
                :data="rows"
                :columns="columns" 
                :linkable="linkable"
                :linkPath="linkpath"
                :move-pages="movePages" 
                :start-row="startRow" 
                :rows-per-page="rowsPerPage">
            </paged-grid>
        </div>
    </div>
</script>

<script type="text/x-template" id="tmpl-device-type-edit">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>Device Type</legend>
            <div class="form-group">
                <label for="name" class="control-label col-xs-2">Name</label>
                <div class="col-xs-2">
                    <input type="text" name="name" v-model="DeviceType.Name"/>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="saveSelf">
                    <template v-if="DeviceType.DTI">Update</template>
                    <template v-else>Add</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="DeviceType.DTI">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-vm-ips">
  <div>
  <table class="table">
    <thead>
      <tr>
        <th>IP</th>
        <th>Type</th>
        <th v-if="canEdit">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="entry in rows" id="ip-row-{{$index}}">
        <td>
            <input id="ip-{{$index}}" type="text" v-model="rows[$index].IP"/>
        </td>
        <td>
            <select id="ip-{{$index}}" v-model="rows[$index].IPT" number>
                <option v-for="type in types" v-bind:value="type.IPT">
                    {{ type.Name }}
                </option>
            </select>
        </td>
        <td v-if="canEdit">
            <button class="btn" v-on:click.prevent="updateIP($index)">Update</button>
            <button class="btn" v-on:click.prevent="deleteIP($index)">Delete</button>
        </td>
      </tr>
       
      <tr v-if="canEdit">
        <td>
            <input type="text" v-model="newIP"/>
        </td>
        <td>
            <select id="ip-{{$index}}" v-model="newIPT">
                <option v-for="type in types" v-bind:value="type.IPT">
                    {{ type.Name }}
                </option>
            </select>
        </td>
        <td>
            <button class="btn" v-on:click.prevent="addIP" :disabled="ipAddDisabled">Add</button>
        </td>
      </tr>

    </tbody>
  </table>
  </div>
</script>

<script type="text/x-template" id="tmpl-vm-list">
    <div id="vm-page">
        <h1 class="mytitle">{{sitename}} VMs</h1>
        <label for="STI">Site</label>
        <select id="STI" v-model="STI">
            <option v-for="dc in sites" v-bind:value="dc.STI">
                {{ dc.Name }}
            </option>
        </select>

        <label for="query">Filter</label>
        <input name="query" v-model="searchQuery" @keyup="resetStartRow">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="data | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :filename="filename"
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<script type="text/x-template" id="tmpl-search-for">
<div>
    <div v-if="found.length">
        <h1 class="mytitle">{{ found.length }} matches found for: {{ searchText }}</h1>
        <found-list
            :columns="columns"
            :rows="found">
        </found-list>
    </div>
    <div v-else>
        <h1 class="mytitle">No matches found for: {{ searchText }}</h1>
    </div>
</div>
</script>


<script type="text/x-template" id="tmpl-device-edit">
    <div id="device-edit" class="col-xs-12">
    
        <form role="form" class="form-horizontal">
            <fieldset class="col-xs-12">
                <legend>General</legend>

                <div class="form-group">
                    <label for="DTI" class="control-label col-xs-2">Type</label>
                    <div class="col-xs-2">
                        <select id="DTI" v-model="Device.DTI" number>
                            <option v-for="type in device_types" v-bind:value="type.DTI">
                                {{ type.Name }}
                            </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Hostname" class="control-label col-xs-2">Hostname</label>
                    <div class="col-xs-2">
                        <input type="text" id="Hostname" v-model="Device.Hostname" pattern=".+" required/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Alias" class="control-label col-xs-2">Alias</label>
                    <div class="col-xs-2">
                        <input type="text" v-model="Device.Alias"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="STI" class="control-label col-xs-2">Site</label>
                    <div class="col-xs-2">
                        <select id="STI" v-model="Device.STI" number>
                            <option v-for="dc in sites" v-bind:value="dc.STI">
                                {{ dc.Name }}
                            </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="RID" class="control-label col-xs-2"><a href="rack/view/{{Device.DC}}/{{Device.Rack}}">Rack Number</a></label>
                    <div class="col-xs-2">
                        <select id="RID" name="RID" v-model="Device.RID" number>
                            <option v-for="rack in Device.racks" v-bind:value="rack.RID">
                                {{ rack.Label }}
                            </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="RU" class="control-label col-xs-2">Rack Unit</label>
                    <div class="col-xs-2">
                        <input type="text" id="RU" v-model="Device.RU" number/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Height" class="control-label col-xs-2">Unit Height</label>
                    <div class="col-xs-2">
                        <input type="text" id="Height" v-model="Device.Height" number/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Profile" class="control-label col-xs-2">Profile</label>
                    <div class="col-xs-2">
                        <input type="text" id="Profile" v-model="Device.Profile"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="TID" class="control-label col-xs-2">Tag</label>
                    <div class="col-xs-2">
                            <select id="TID" v-model="Device.TID" number>
                                <option value="0"></option>
                                <option v-for="tag in tags" v-bind:value="tag.TID">
                                    {{ tag.Name }}
                                </option>
                            </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="AssetTag" class="control-label col-xs-2">Asset Tag</label>
                    <div class="col-xs-2">
                        <input type="text" id="AssetTag" v-model="Device.AssetTag"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Serial" class="control-label col-xs-2">Serial Number</label>
                    <div class="col-xs-2">
                        <input type="text" id="Serial" v-model="Device.SerialNo"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Assigned" class="control-label col-xs-2">Assigned</label>
                    <div class="col-xs-2">
                        <input type="text" id="Assigned" v-model="Device.Assigned"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Note" class="control-label col-xs-2">Note</label>
                    <div class="col-xs-2">
                        <textarea cols="35" rows="3" id="Note" v-model="Device.Note"></textarea>
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12" v-if="canEdit">
                <div class="form-group">
                    <div class="col-xs-offset-1 col-xs-1">
                        <button class="btn" v-on:click.prevent="showList">Cancel</button>
                    </div>
                    <div class="col-xs-1">
                        <button class="btn" v-on:click.prevent="saveSelf">
                        <template v-if="Device.DID">Update</template>
                        <template v-else>Add</template>
                        </button>
                    </div>
                    <div class="col-xs-1" v-if="Device.Version > 0">
                        <button class="btn" v-on:click.prevent="audit">Audit</button>
                    </div>
                    <div class="col-xs-1" v-if="Device.DID">
                        <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12">
                <legend>IP Networking</legend>
                <network-grid
                    :ports="Device.interfaces"
                    :iptypes="ipTypes"
                    :rows="Device.ips"
                    :columns="netColumns"
                    >
                </network-grid>
            </fieldset>

            <fieldset class="col-xs-12">
                <legend>Network Interfaces</legend>
                <interface-grid
                    :DID="Device.DID"
                    :rows="Device.interfaces"
                    :columns="ifaceColumns">
                </interface-grid>
            </fieldset>

            <fieldset class="col-xs-12" v-if="Device.vms">
                <legend>VMs</legend>
                <paged-grid 
                    :data="Device.vms" 
                    :columns="vmColumns" 
                    :linkable="vmLinkable"
                    :linkPath="vmLinkpath"
                    :move-pages="movePages" 
                    :start-row="startRow" 
                    :rows-per-page="rowsPerPage">
                </paged-grid>
            </fieldset>
        </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-vendor-edit">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>Vendor</legend>
            <div class="form-group">
                <label for="name" class="control-label col-xs-2">Name</label>
                <div class="col-xs-2">
                    <input type="text" name="name" v-model="Vendor.Name"/>
                </div>
            </div>

            <div class="form-group">
                <label for="phone" class="control-label col-xs-2">Phone Number</label>
                <div class="col-xs-2">
                    <input type="text" name="phone" v-model="Vendor.Phone"/>
                </div>
            </div>

            <div class="form-group">
                <label for="Note" class="control-label col-xs-2">Note</label>
                <div class="col-xs-2">
                    <textarea cols="25" rows="2" name="Note" v-model="Vendor.Note"></textarea>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="canEdit">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="saveSelf">
                    <template v-if="Vendor.VID">Update</template>
                    <template v-else>Add</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="Vendor.VID">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-mfgr-edit">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>Manufacturer</legend>
            <div class="form-group">
                <label for="name" class="control-label col-xs-2">Name</label>
                <div class="col-xs-2">
                    <input type="text" name="name" v-model="Mfgr.Name"/>
                </div>
            </div>

            <div class="form-group">
                <label for="note" class="control-label col-xs-2">Note</label>
                <div class="col-xs-2">
                    <input type="text" name="note" v-model="Mfgr.Note"/>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="canEdit">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="saveSelf">
                    <template v-if="Mfgr.MID">Update</template>
                    <template v-else>Add</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="Mfgr.MID > 1">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-part-load">
    <form role="form" class="form-horizontal">
        <h2>Paste and save tab delimited parts list</h2>
        <fieldset class="col-xs-12">
            <legend>Load Parts</legend>

            <div class="form-group">
                <label for="STI" class="control-label col-xs-2">Site</label>
                <div class="col-xs-2">
                    <select id="STI" v-model="STI" number>
                        <option v-for="site in sites" v-bind:value="site.STI">
                            {{ site.Name }}
                        </option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="Parts" class="control-label col-xs-2">Parts</label>
                <div class="col-xs-2">
                    <textarea cols="80" rows="20" name="Note" v-model="Parts">
                    </textarea>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn btn-primary" v-on:click.prevent="saveParts">Load</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-rack-edit">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>Rack</legend>
            <div class="form-group">
                    <label for="STI" class="control-label col-xs-2">Site</label>
                    <div class="col-xs-2">
                        <select id="STI" v-model="Rack.STI" number>
                            <option v-for="site in sites" v-bind:value="site.STI">
                                {{ site.Name }}
                            </option>
                        </select>
                    </div>
            </div>
            <div class="form-group">
                <label for="Label" class="control-label col-xs-2">Rack Number</label>
                <div class="col-xs-2">
                    <input type="text" name="Label" v-model="Rack.Label" required number/>
                </div>
            </div>

            <div class="form-group">
                <label for="VendorID" class="control-label col-xs-2">Vendor ID</label>
                <div class="col-xs-2">
                    <input type="text" name="VendorID" v-model="Rack.VendorID"/>
                </div>
            </div>

            <div class="form-group">
                <label for="RUs" class="control-label col-xs-2">Height (RUs)</label>
                <div class="col-xs-2">
                    <input type="text" name="RUs" v-model="Rack.RUs" number/>
                </div>
            </div>

            <div class="form-group">
                <label for="Note" class="control-label col-xs-2">Note</label>
                <div class="col-xs-2">
                    <textarea cols="25" rows="2" name="Note" v-model="Rack.Note"></textarea>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="Rack.RID != 0">
            <label for="Audit" class="control-label col-xs-2">Audit</label>
            <div class="col-xs-2">
                 <a v-link="{ path: '/rack/audit/' + Rack.RID }">Change History</a>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="canEdit">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn btn-primary" :disabled="notReady" v-on:click.prevent="saveSelf">
                        <template v-if="Rack.RID">Update</template>
                        <template v-else>Add</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="Rack.RID">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-rack-list">
    <div>
        <h1 class="mytitle">{{sitename}} Rack Inventory</h1>
        <h3 class="mytitle">({{rows.length}} racks)</h3>
        <label for="STI">Site</label>
        <select id="STI" name="STI" v-model="STI">
            <option v-for="dc in sites" v-bind:value="dc.STI">
                {{ dc.Name }}
            </option>
        </select>

        <label for="query">Filter</label>
        <input id="query" v-model="searchQuery">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="rows | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-vendor-list">
    <div>
        <h1 class="mytitle">Vendors</h1>
        <label for="query">Search</label>
        <input id="query" v-model="searchQuery">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="rows | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<script type="text/x-template" id="tmpl-mfgr-list">
    <div>
        <h1 class="mytitle">Manufacturers</h1>
        <label for="query">Search</label>
        <input id="query" v-model="searchQuery">
        <a v-if="canEdit" class="btn btn-info" v-link="{ path: '/mfgr/edit/0' }">Add</a>
        <paged-grid 
            :data="rows | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-site-edit">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>Site</legend>
            <div class="form-group">
                <label for="name" class="control-label col-xs-2">Name</label>
                <div class="col-xs-2">
                    <input type="text" name="name" v-model="Site.Name"/>
                </div>
            </div>

            <div class="form-group">
                <label for="city" class="control-label col-xs-2">City</label>
                <div class="col-xs-2">
                    <input type="text" name="city" v-model="Site.City"/>
                </div>
            </div>

            <div class="form-group">
                <label for="country" class="control-label col-xs-2">Country</label>
                <div class="col-xs-2">
                    <input type="text" name="country" v-model="Site.Country"/>
                </div>
            </div>

            <div class="form-group">
                <label for="note" class="control-label col-xs-2">Note</label>
                <div class="col-xs-2">
                    <input type="text" name="note" v-model="Site.Note"/>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="canEdit">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="saveSelf">
                    <template v-if="Site.STI">Update</template>
                    <template v-else>Add</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="Site.STI">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-site-list">
    <div>
        <h1 class="mytitle">Sites</h1>
        <label for="query">Search</label>
        <input id="query" v-model="searchQuery">
        <a v-if="canEdit" class="btn btn-info" v-link="{ path: '/site/edit/0' }">Add</a>
        <paged-grid 
            :data="rows | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<script type="text/x-template" id="tmpl-rack-view">
    <div class="rackwrap">
    <div class="rackview">
         <h2 class="racktitle">
         <a v-link="{ path: '/rack/edit/' + layouts.rack.RID}">Rack: {{ layouts.rack.Label }}</a>
         </h2>
         <h4 class="racktitle">
         <span v-if="layouts.rack.VendorID">(Vendor ID: {{layouts.rack.VendorID}})</span>
         <span v-else>&nbsp;</span>
         </h4>
        <table class="racked">
            <tr>
                <th class="rcell th-ru">RU</th>
                <th class="rcell sizecol" v-if="audit">Size</th>
                <th class="rcell">Hostname</th>
                <th class="rcell">IPMI</th>
                <th class="rcell cellok">ok</th>
                <th class="rcell">Internal</th>
                <th class="rcell cellok">ok</th>
                <th class="rcell" v-if="audit">Up</th>
                <th class="rcell" v-if="audit">Down</th>
            </tr>
            <tr v-for="lay in layouts.units" class="rackrow rackheight{{lay.Height}}" v-if="lay.Height || audit">
                <td class="rcell">
                    <template v-if="lay.DID">
                    {{ lay.RU }}
                    </template>
                    <template v-else>
                    <a v-link="{ name: 'device-add', params: {STI: layouts.rack.STI, RID:layouts.rack.RID, RU:lay.RU}}">{{ lay.RU }}</a>
                    </template>
                </td>
                <td class="rcell sizecol" v-if="audit">
                    <template v-if="lay.DID">
                    <input type="text" class="sizecol" v-bind:class="{badentry: lay.badHeight}" v-model="lay.newHeight" @change="resize(lay)" number>
                    </template>
                </td>
                <td class="rcell">
                    <template v-if="audit">
                    <input type="text" v-if="lay.DID" v-bind:class="{badentry: lay.badHostname}" v-model="lay.Hostname" @change="rename(lay)">
                    </template>
                    <template v-else>
                    <a v-if="lay.DID" v-link="{ path: '/device/edit/' + lay.DID}">{{ lay.Hostname }}</a>
                    </template>
                </td>
                <td class="rcell">
                    <template v-if="audit">
                    <input type="text" v-if="lay.DID" v-bind:class="{badentry: lay.badMgmt}" v-model="lay.newMgmt" @change="changeMgmt(lay)">
                    </template>
                    <template v-else>
                    {{ lay.Mgmt }}
                    </template>
                </td>
                <td class="rcell">{{ lay.pingMgmt }}</td>
                <td class="rcell">
                    <template v-if="audit">
                    <input type="text" v-if="lay.DID" v-bind:class="{badentry: lay.badIP}" v-model="lay.newIP" @change="changeIP(lay)">
                    </template>
                    <template v-else>
                    {{ lay.IPs }}
                    </template>
                </td>
                <td class="rcell">{{ lay.pingIP }}</td>
                <td class="rcell" v-if="audit">
                    <button v-if="okUp(lay)" v-on:click.prevent="moveUp(lay)">&uarr;</button>
                </td>
                <td class="rcell" v-if="audit">
                    <button v-if="okDown(lay)" v-on:click.prevent="moveDown(lay)">&darr;</button>
                </td>
            </tr>
        </table>
    </div>
    </div>
</script>


<script type="text/x-template" id="tmpl-rack-layout">
    <div>
        <h1 class="mytitle">{{sitename}} Rack View</h1>
        <label for="STI">Site</label>
        <select id="STI" name="STI" v-model="STI" number>
            <option v-for="dc in sites" v-bind:value="dc.STI">
                {{ dc.Name }}
            </option>
        </select>

        <label for="RID">Rack</label>
        <select id="Rack" v-model="RID" number>
            <option v-for="rack in racks" v-bind:value="rack.RID">
                {{ rack.Label }}
            </option>
        </select>

        <button class="btn" v-on:click.prevent="ping">Ping</button>

        <template v-if="canEdit">
        <label for="audit">Audit</label>
        <input type="checkbox" id="audit" name="audit" v-model="audit"/>
        </template>

        <div class="allracks">
            <rack-view 
                v-for="lump in lumpy | filterBy rfilter"
                v-bind:RID="RID"
                v-bind:audit="audit"
                :layouts="lump">
            </rack-view>
        </div>
    </div>
</script>


<script type="text/x-template" id="tmpl-vm-edit">
    <div class="vm">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>Edit VM</legend>
            <div class="form-group">
                <label for="Server" class="control-label col-xs-2">Server</label>
                <div class="col-xs-2">
                     <a v-link="{ path: '/device/edit/' + VM.DID}">{{ VM.Server }}</a>
                </div>
            </div>

            <div class="form-group">
                <label for="Hostname" class="control-label col-xs-2">Hostname</label>
                <div class="col-xs-2">
                    <input type="text" name="Hostname" v-model="VM.Hostname"  pattern=".+" required/>
                </div>
            </div>

            <div class="form-group">
                <label for="Profile" class="control-label col-xs-2">Profile</label>
                <div class="col-xs-2">
                    <input type="text" name="Profile" v-model="VM.Profile"/>
                </div>
            </div>

            <div class="form-group">
                <label for="Note" class="control-label col-xs-2">Note</label>
                <div class="col-xs-2">
                    <textarea cols="25" rows="2" name="Note" v-model="VM.Note"></textarea>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="VM.Version > 0">
            <label for="Audit" class="control-label col-xs-2">Audit</label>
            <div class="col-xs-2">
                 <a v-link="{ path: '/vm/audit/' + VM.VMI }">Change History</a>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="canEdit">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="saveSelf">Update</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>

            <fieldset class="col-xs-12">
                <legend>IP Networking</legend>
                <vm-ips :VMI="VM.VMI">
                </vm-ips>
            </fieldset>
    </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-audit">
    <div class="view">
        <div v-if="$loadingRouteData">Loading ...</div>
        <div v-if="!$loadingRouteData">
            <label for="query">Filter</label>
            <input name="query" v-model="searchQuery" @keyup="resetStartRow">

            <select id="pagerows" v-model="pagerows">
                <option v-for="size in sizes" v-bind:value="size">
                    {{ size }}
                </option>
            </select>

            <paged-grid 
                :data="rows | filterBy searchQuery" 
                :columns="columns" 
                :linkable="linkable"
                :linkPath="linkpath"
                :move-pages="movePages" 
                :start-row="startRow" 
                :filename="filename"
                :rows-per-page="rowsPerPage">
            </paged-grid>
        </div>
    </div>
</script>


<script type="text/x-template" id="tmpl-part-inventory">
    <div>
        <h1 class="mytitle">{{sitename}} Available Inventory</h1>
        <label for="STI">Site</label>
        <select id="STI" name="STI" v-model="STI">
        <option v-for="site in sites" v-bind:value="site.STI">
            {{ site.Name }}
        </option>
        </select>
        <label for="query">Search</label>
        <input id="query" v-model="searchQuery">

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="partData | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<script type="text/x-template" id="tmpl-user-list">
    <div>
        <h1 class="mytitle">Our Users</h1>
        <paged-grid 
            :data="rows | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<script type="text/x-template" id="tmpl-vlan-list">
    <div>
        <h1 class="mytitle">VLANs</h1>

        <label for="STI">Site</label>
        <select id="STI" name="STI" v-model="STI">
        <option v-for="site in sites" v-bind:value="site.STI">
            {{ site.Name }}
        </option>
        </select>

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="data | siteFilter" 
            :filename="filename" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>


<script type="text/x-template" id="tmpl-vlan-edit">
    <div id="vlan-edit" class="col-xs-12">
    
        <form role="form" class="form-horizontal">
            <fieldset class="col-xs-12">
                <legend>VLAN</legend>
                <div class="form-group">
                    <label for="STI" class="control-label col-xs-2">Site</label>
                    <div class="col-xs-2">
                        <select id="STI" name="STI" v-model="VLAN.STI" number>
                        <option v-for="site in sites" v-bind:value="site.STI">
                            {{ site.Name }}
                        </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Name" class="control-label col-xs-2">Name</label>
                    <div class="col-xs-2">
                        <input type="text" id="Name" v-model="VLAN.Name" number/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Profile" class="control-label col-xs-2">Profile</label>
                    <div class="col-xs-2">
                        <input type="text" id="Profile" v-model="VLAN.Profile"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Gateway" class="control-label col-xs-2">Gateway</label>
                    <div class="col-xs-2">
                        <input type="text" id="Gateway" v-model="VLAN.Gateway"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Route" class="control-label col-xs-2">Route</label>
                    <div class="col-xs-2">
                        <input type="text" id="Route" v-model="VLAN.Route"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Netmask" class="control-label col-xs-2">Netmask</label>
                    <div class="col-xs-2">
                        <input type="text" id="Netmask" v-model="VLAN.Netmask"/>
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12" v-if="canEdit">
                <div class="form-group">
                    <div class="col-xs-offset-1 col-xs-1">
                        <button class="btn" v-on:click.prevent="showList">Cancel</button>
                    </div>
                    <div class="col-xs-1">
                        <button class="btn" v-on:click.prevent="saveSelf">Update</button>
                    </div>
                    <div class="col-xs-1">
                        <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-ip-reserve">
    <div id="ip-reserve" class="col-xs-12">
    
        <form role="form" class="form-horizontal">
            <fieldset class="col-xs-12">
                <legend>Reserve IPs</legend>
                <div class="form-group">
                    <label for="STI" class="control-label col-xs-2">Site</label>
                    <div class="col-xs-2">
                        <select id="STI" name="STI" v-model="STI" number>
                        <option v-for="site in sites" v-bind:value="site.STI">
                            {{ site.Name }}
                        </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Name" class="control-label col-xs-2">VLAN</label>
                    <div class="col-xs-2">
                        <select id="VLI" name="VLI" v-model="VLI" number>
                        <option v-for="vlan in vlans" v-bind:value="vlan.VLI">
                            {{ vlan.Name }}
                        </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Network" class="control-label col-xs-2">Network Range</label>
                    <div class="col-xs-3">
                        <input class="form-control col-xs-3" type="text" id="Network" v-model="Network" readonly/>
                    </div>
                </div>
                <div class="form-group">
                    <label for="From" class="control-label col-xs-2">From</label>
                    <div class="col-xs-2">
                        <input type="text" id="From" v-model="From" @change="checkFrom"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="To" class="control-label col-xs-2">To</label>
                    <div class="col-xs-2">
                        <input type="text" id="To" v-model="To" @change="checkTo"/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Note" class="control-label col-xs-2">Note</label>
                    <div class="col-xs-2">
                        <input type="text" id="Note" v-model="Note"/>
                    </div>
                </div>

                <div class="form-group" v-if="conflicted">
                    <div class="col-xs-offset-2 col-xs-2 badentry">
                        Error: there are {{conflicted}} IPs in that range
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12">
                <div class="form-group">
                    <div class="col-xs-offset-1 col-xs-1">
                        <button class="btn" v-on:click.prevent="showList">Cancel</button>
                    </div>
                    <div class="col-xs-1">
                        <button class="btn btn-primary" v-on:click.prevent="reserveIPs" :disabled="disableReserve">Reserve</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</script>

<script type="text/x-template" id="tmpl-ip-edit">
    <form role="form" class="form-horizontal">
        <fieldset class="col-xs-12">
            <legend>IP Edit</legend>
            <div class="form-group">
                <label for="ipaddr" class="control-label col-xs-2">IP Address</label>
                <div class="col-xs-2">
                    <input type="text" name="ipaddr" v-model="IP.IP"/>
                </div>
            </div>

            <div class="form-group">
                <label for="vlan" class="control-label col-xs-2">VLAN</label>
                <div class="col-xs-2">
                    <input type="text" name="vlan" v-model="IP.VLAN" readonly/>
                </div>
            </div>

            <div class="form-group" v-if="inuse">
                <label for="iptype" class="control-label col-xs-2">Type</label>
                <div class="col-xs-2">
                    <select id="iptype" v-model="IP.IPT" number>
                        <option v-for="type in iptypes" v-bind:value="type.IPT">
                            {{ type.Name }}
                        </option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="Note" class="control-label col-xs-2">Note</label>
                <div class="col-xs-2">
                    <textarea cols="25" rows="2" name="Note" v-model="IP.Note"></textarea>
                </div>
            </div>
        </fieldset>

        <fieldset class="col-xs-12" v-if="canEdit">
            <div class="form-group">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn" v-on:click.prevent="saveSelf">
                    <template v-if="IP.IID">Update</template>
                    <template v-else>Add</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="IP.IID">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </fieldset>
    </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-part-edit">
    <div id="part-edit">

        <h1 class="mytitle" v-if="Part.PID">Edit Part</h1>
        <h1 class="mytitle" v-else>Add Part</h1>

        <form id="part-edit" class="form-horizontal">
        <div class="form-group">
            <label for="STI" class="control-label col-xs-2">Site</label>
            <div class="col-xs-2">
                <select id="STI" name="STI" v-model="Part.STI" number>
                <option v-for="site in sites" v-bind:value="site.STI">
                    {{ site.Name }}
                </option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="description" class="control-label col-xs-2">Description</label>
            <div class="col-xs-4">
                <input type="text" class="form-control" id="description" v-model="Part.Description">
            </div>
        </div>
        <div class="form-group">
            <label for="PTI" class="control-label col-xs-2">Part Type</label>
            <div class="col-xs-2">
                <select id="PTI" name="PTI" v-model="Part.PTI" number>
                <option v-for="type in types" v-bind:value="types.PTI">
                    {{ type.Name }}
                </option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="VID" class="control-label col-xs-2"><a v-link="{ path: '/vendor/list' }">Vendor</a></label>
            <div class="col-xs-2">
                <select id="VID" name="VID" v-model="Part.VID" number>
                <option v-for="vendor in vendors" v-bind:value="vendor.VID">
                    {{ vendor.Name }}
                </option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="part-number" class="control-label col-xs-2">Part Number</label>
            <div class="col-xs-2">
                <input type="text" class="form-control" id="part-number" v-model="Part.PartNumber">
            </div>
        </div>
        <div class="form-group">
            <label for="part-sn" class="control-label col-xs-2">Serial Number</label>
            <div class="col-xs-2">
                <input type="text" class="form-control" id="part-sn" v-model="Part.Serial">
            </div>
        </div>
        <div class="form-group">
            <label for="part-tag" class="control-label col-xs-2">Asset Tag</label>
            <div class="col-xs-2">
                <input type="text" class="form-control" id="part-tag" v-model="Part.AssetTag">
            </div>
        </div>
        <div class="form-group">
            <label for="vendor-rma" class="control-label col-xs-2">Manufacturer</label>
            <div class="col-xs-2">
                <input type="text" class="form-control" id="vendor-rma" v-model="Part.Mfgr">
            </div>
        </div>
        <div class="form-group">
            <label for="part-price" class="control-label col-xs-2">Price</label>
            <div class="col-xs-2">
                <input type="text" class="form-control"  v-bind:class="{badentry: badPrice}" id="part-price" v-model="Part.Price" @change="validprice">
            </div>
        </div>
        <div class="form-group">
            <label for="bad-part" class="control-label col-xs-2">Bad Part</label>
            <div class="col-xs-2">
                <input type="checkbox" class="form-control" id="bad-part" v-model="Part.Bad">
            </div>
        </div>
        <div class="form-group" v-if="Part.PID">
            <label for="hostname" class="control-label col-xs-2">Server Hostname</label>
            <div class="col-xs-2">
                <input type="text" class="form-control" v-bind:class="{badentry: badHost}" id="hostname" placeholder="optional"  v-model="Part.Hostname" @change="findhost">
            </div>
        </div>
        <div class="form-group" v-if="canEdit">
            <div class="col-xs-offset-1 col-xs-1">
                <button class="btn" type="cancel" v-on:click.prevent="showList">Cancel</button>
            </div>
            <div class="col-xs-1" v-if="Part.PID">
                <button class="btn" v-on:click.prevent="doRMA">RMA</button>
            </div>
            <div class="col-xs-1">
                <button class="btn btn-primary" v-on:click.prevent="saveSelf" :disabled="disableSave">
                <template v-if="Part.PID">
                    Update
                </template>
                <template v-else>
                    Add
                </template>
                </button>
            </div>
        </div>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-user-edit">
    <div id="user-edit">
        <h1 class="mytitle">Edit User</h1>
        <form class="form-horizontal">
            <div class="form-group">
                <label for="login" class="control-label col-xs-2">Login</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="login" v-model="User.Login">
                </div>
            </div>
            <div class="form-group">
                <label for="first" class="control-label col-xs-2">First Name</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="first" v-model="User.First">
                </div>
            </div>
            <div class="form-group">
                <label for="server-sn" class="control-label col-xs-2">Last Name</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="server-sn" v-model="User.Last">
                </div>
            </div>
            <div class="form-group">
                <label for="level" class="control-label col-xs-2">Admin Level</label>
                <div class="col-xs-2">
                    <select id="level" name="level" v-model="User.Level">
                    <option v-for="level in levels" v-bind:value="level.Level">
                        {{ level.Label }}
                    </option>
                    </select>
                </div>
            </div>
            <div class="form-group" v-if="isAdmin">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" type="cancel" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1" v-if="User.USR">
                    <button class="btn btn-primary" v-on:click.prevent="saveSelf" v-if="User.USR">Update</button>
                    <button class="btn btn-primary" v-on:click.prevent="addSelf" v-else>Add</button>
                </div>
                <div class="col-xs-1" v-if="User.USR">
                    <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
                <div class="col-xs-1" v-if="canAssume" v-if="admin > 2">
                    <button class="btn" v-on:click.prevent="assumeUser">Run as {{User.Login}}</button>
                </div>
            </div>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-rma-edit">
    <div id="rma-edit">

        <h1 class="mytitle">
        <template v-if="RMA.RMD">RMA #{{RMA.RMD}}</template>
        <template v-else>New RMA</template>
        </h1>
        <form class="form-horizontal">
            <div class="form-group">
                <label for="description" class="control-label col-xs-2">Description</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="description" v-model="RMA.Description">
                </div>
            </div>
            <div class="form-group">
                <label for="hostname" class="control-label col-xs-2">Server Hostname</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="hostname" placeholder="optional"  v-model="RMA.Hostname" @change="findhost">
                </div>
            </div>
            <div class="form-group">
                <label for="server-sn" class="control-label col-xs-2">Server SN</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="server-sn" v-model="RMA.ServerSN">
                </div>
            </div>
            <div class="form-group">
                <label for="part-number" class="control-label col-xs-2">Part Number</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="part-number" v-model="RMA.PartNumber">
                </div>
            </div>
            <div class="form-group">
                <label for="part-sn" class="control-label col-xs-2">Part Serial Number</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="part-sn" v-model="RMA.PartSN">
                </div>
            </div>
            <div class="form-group">
                <label for="jira" class="control-label col-xs-2">Jira Ticket</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="jira" v-model="RMA.Jira">
                </div>
            </div>
            <div class="form-group">
                <label for="vendor-rma" class="control-label col-xs-2">Vendor RMA #</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="vendor-rma" v-model="RMA.VendorRMA">
                </div>
            </div>
            <div class="form-group">
                <label for="date-shipped" class="control-label col-xs-2">Date Shipped</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="date-shipped" v-model="RMA.Shipped">
                </div>
            </div>
            <div class="form-group">
                <label for="shipped-tracking" class="control-label col-xs-2">Shipping Tracking #</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="shipped-tracking" v-model="RMA.ShipTrack">
                </div>
            </div>
            <div class="form-group">
                <label for="date-received" class="control-label col-xs-2">Date Received</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="date-received" v-model="RMA.Received">
                </div>
            </div>
            <div class="form-group">
                <label for="received-tracking" class="control-label col-xs-2">Received Tracking #</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="received-tracking" v-model="RMA.RecvTrack">
                </div>
            </div>
            <div class="form-group">
                <label for="date-closed" class="control-label col-xs-2">Date Closed</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="date-closed" v-model="RMA.Closed">
                </div>
            </div>
            <div class="form-group">
                <label for="date-created" class="control-label col-xs-2">Date Created</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="date-created" v-model="RMA.Created">
                </div>
            </div>
            <div class="form-group" v-if="canEdit">
                <div class="col-xs-offset-1 col-xs-1">
                    <button class="btn" type="cancel" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button class="btn btn-primary" v-on:click.prevent="saveSelf">
                    <template v-if="RMA.RMD">Update</template>
                    <template v-else>Create</template>
                    </button>
                </div>
                <div class="col-xs-1" v-if="RMA.RMD">
                    <button v-if="RMA.RMD" class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                </div>
            </div>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-part-use">
    <div id="use-part">
        <form class="form-horizontal">
            <div class="form-group">
                <label for="PID" class="control-label col-xs-2">Serial Number</label>
                <div class="col-xs-2">
                    <select id="PID" name="PID" v-model="PID" number>
                    <option v-for="part in available" v-bind:value="part.PID">
                        {{ part.Serial }}
                    </option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="hostname" class="control-label col-xs-2">Hostname</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" v-bind:class="{badentry: badHost}" id="hostname" placeholder="required"  v-model="hostname" @change="findhost">
                </div>
            </div>
            <div class="form-group">
                <label for="other" class="control-label col-xs-2">Other</label>
                <div class="col-xs-2">
                    <input type="text" class="form-control" id="other" placeholder="if hostname is not applicable"  v-model="other">
                </div>
            </div>
            <div class="form-group">
                <div class="col-xs-offset-2 col-xs-1">
                    <button class="btn" v-on:click.prevent="showList">Cancel</button>
                </div>
                <div class="col-xs-1">
                    <button id="use-btn" class="btn" v-on:click.prevent="usePart" :disabled="unusable">Use Part</button>
                </div>
            </div>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-tag-edit">
    <div id="tagform">
        <form class="form-horizontal">
            <fieldset class="col-xs-12">
                <div class="form-group">
                    <label for="TID" class="control-label col-xs-2">Tag</label>
                    <div class="col-xs-2">
                            <select id="TID" v-model="tag.TID" number>
                                <option value="0"></option>
                                <option v-for="t in tags" v-bind:value="t.TID">
                                    {{ t.Name }}
                                </option>
                            </select>
                    </div>
                </div>
            </fieldset>
            <fieldset class="col-xs-12">
                <div class="form-group">
                    <label for="new-tag" class="control-label col-xs-2">Name</label>
                    <div class="col-xs-2">
                        <input type="text" class="form-control" id="new-tag" v-model="tag.Name">
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12">
                <div class="form-group">
                    <div class="col-xs-offset-1 col-xs-1">
                        <button class="btn" v-on:click.prevent="showList">Cancel</button>
                    </div>
                    <div class="col-xs-1">
                        <button :disabled="tag.Name.length==0" class="btn" v-on:click.prevent="saveSelf">
                        <template v-if="tag.TID > 0">
                        Update
                        </template>
                        <template v-else>
                        Add
                        </template>
                        </button>
                    </div>
                    <div class="col-xs-1">
                        <button :disabled="tag.TID==0" class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-user-login">
    <div id="login" class="layout">
        <div class="header">
            <h2 class="login">Enter your Okta Login Credentials</h2>
        </div>
        <div class="invalid_login" v-if="errorMsg">{{errorMsg}}</div>

        <div class="contents">
    
            <form class="form-horizontal">
                <fieldset class="col-xs-12">
                    <div class="form-group">
                        <label for="username" class="control-label col-xs-3">Username</label>
                        <div class="col-xs-3">
                            <input type="text" class="form-control" id="username" v-model="username" placeholder="{{placeholder}}" required autofocus/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="control-label col-xs-3">Password</label>
                        <div class="col-xs-3">
                            <input type="password" class="form-control" id="password" v-model="password"/>
                        </div>
                    </div>
                </fieldset>
                <div class="form-group">
                    <div class="col-xs-offset-3 col-xs-1">
                        <button class="btn" v-on:click.prevent="cancel">Cancel</button>
                    </div>
                    <div class="col-xs-1">
                        <button id="use-btn" class="btn btn-primary" v-on:click.prevent="login">Login</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</script>


<script type="text/x-template" id="tmpl-user-logout">
    <div id="logout">
        <h3>Really log out?</h3>
        <div class="form-group">
            <div class="col-xs-offset-2 col-xs-1">
                <button class="btn" v-on:click.prevent="cancel">Cancel</button>
            </div>
            <div class="col-xs-1">
                <button id="use-btn" class="btn btn-primary" v-on:click.prevent="logout">Logout</button>
            </div>
        </div>
    </div>
</script>


<script type="text/x-template" id="tmpl-home-page">
    <div id="homepage">
        <h1 class="mytitle" v-if="title.length">{{title}}</h1>
        <tally-table
            :rows="rows"
            :columns="columns">
        </tally-table>
    </div>
</script>


<script type="text/x-template" id="tmpl-ip-types">
    <div>
        <h1 class="mytitle">IP Types</h1>
        <paged-grid 
            :data="data | filterBy searchQuery" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :move-pages="movePages" 
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<script type="text/x-template" id="tmpl-iptype-edit">
    <div id="tagform">
        <form class="form-horizontal">
            <fieldset class="col-xs-12">
                <div class="form-group">
                    <label for="name" class="control-label col-xs-2">Name</label>
                    <div class="col-xs-2">
                        <input type="text" class="form-control" id="name" v-model="IPType.Name" @change="newname">
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12">
                <div class="form-group">
                    <label for="mgmt" class="control-label col-xs-2">Management</label>
                    <div class="col-xs-2">
                        <input type="checkbox" class="form-control" id="mgmt" v-model="IPType.Mgmt">
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12">
                <div class="form-group">
                    <label for="multi" class="control-label col-xs-2">Multiple</label>
                    <div class="col-xs-2">
                        <input type="checkbox" class="form-control" id="multi" v-model="IPType.Multi">
                    </div>
                </div>
            </fieldset>

            <fieldset class="col-xs-12" v-if="canEdit">
                <div class="form-group">
                    <div class="col-xs-offset-1 col-xs-1">
                        <button class="btn" v-on:click.prevent="showList">Cancel</button>
                    </div>
                    <div class="col-xs-1">
                        <button :disabled="! IPType.Name" class="btn" v-on:click.prevent="saveSelf">
                        <template v-if="IPType.IPT">
                        Update
                        </template>
                        <template v-else>
                        Add
                        </template>
                        </button>
                    </div>
                    <div class="col-xs-1" v-if="IPType.IPT">
                        <button class="btn" v-on:click.prevent="deleteSelf">Delete</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
</script>


<script type="text/x-template" id="tmpl-paged-grid">
    <div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th v-for="key in columns"
                      @click.prevent="sortBy(key)"
                      :class="{active: sortKey == key}">
                      {{key | capitalize}}
                      <span class="arrow"
                        :class="sortOrders[key] > 0 ? 'asc' : 'dsc'">
                      </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr id="rowid(entry)" 
                    v-for="entry in data 
                        | limitBy rowsPerPage startRow
                        | orderBy sortKey sortOrders[sortKey]">
                    <td v-for="key in columns">
                       <template v-if="linkable(key)">
                          <a v-link="{ path: linkpath(entry, key)}">{{ entry[key] }}</a>
                       </template>
                       <template v-else>
                          {{* entry[key] }}
                       </template>
                    </td>
                </tr>
            </tbody>
        </table>
        <div id="page-navigation">
            <template v-if="data.length > rowsPerPage">
            <button v-if="rowsPerPage" class="btn" @click=movePages(-1)>Back</button>
            {{rowStatus}}
            <button v-if="rowsPerPage" class="btn" @click=movePages(1)>Next</button>
            </template>
            <button v-if="canDownload" class="btn download" v-on:click.prevent="download">Download</button>
        </div>
    </div>
</script>


<script type="text/x-template" id="tmpl-session-list">
    <div>
        <h1 class="mytitle">Session Activity</h1>

        <label for="pagerows">page size</label>
        <select id="pagerows" v-model="pagerows">
            <option v-for="size in sizes" v-bind:value="size">
                {{ size }}
            </option>
        </select>

        <paged-grid 
            :data="rows"
            :filename="filename" 
            :columns="columns" 
            :linkable="linkable"
            :linkPath="linkpath"
            :start-row="startRow" 
            :rows-per-page="rowsPerPage">
        </paged-grid>
    </div>
</script>

<!-- instantiate our components -->

<script src="/dcman/static/js/spa.js"></script>
